{
    "type": "index_parallel",
    "spec": {
      "ioConfig": {
        "type": "index_parallel",
        "inputSource" : {
          "type" : "local",
          "baseDir" : "BASE_DIR",
          "filter" : "*.json.gz"
        },
        "inputFormat": {
          "type": "json"
        },
        "appendToExisting": false
      },
      "tuningConfig": {
        "type": "index_parallel",
        "partitionsSpec": {
          "type": "dynamic"
        },
        "maxNumConcurrentSubTasks": 2,
        "maxTotalRows": 100000
      },
      "dataSchema": {
        "dataSource": "DATA_SOURCE",
        "granularitySpec": {
          "type": "uniform",
          "segmentGranularity": "DAY",
          "queryGranularity": "MINUTE",
          "intervals": ["INTERVALS"],
          "rollup": true
        },
        "timestampSpec": {
          "column": "StatusChangeTimestamp",
          "format": "iso"
        },
        "dimensionsSpec": {
          "dimensions": [
            "AccessibilityFeatures",
            {"name": "AccessoryUnitSF", "type": "long"},
            "AccessoryUnitType",
            "AccessoryUnitYN",
            {"name": "AcresBottomLand", "type": "double"},
            {"name": "AcresCultivated", "type": "double"},
            {"name": "AcresIrrigated", "type": "double"},
            {"name": "AcresPasture", "type": "double"},
            "ActiveContinueToShowDate",
            "ActiveKickOutDate",
            {"name": "ActiveOpenHouseCount", "type": "long"},
            "ActiveOptionContractDate",
            "AerialPhotoAvailableYN",
            "AgentBothSidesAcknowledgementYN",
            "AGExemptionYN",
            "AppFeePayableTo",
            "AppFeePlus18YrsYN",
            "AppliancesYN",
            {"name": "ApplicationFeeAmount", "type": "long"},
            "ApplicationFeeYN",
            "AppointmentCall",
            "AppointmentPhone",
            "AppointmentPhoneExt",
            "AppraiserName",
            "ArchitecturalStyle",
            {"name": "AssociationFee", "type": "long"},
            "AssociationFeeFrequency",
            "AssociationFeeIncludes",
            "AssociationType",
            {"name": "AverageMonthlyLease", "type": "long"},
            "BackOnMarketDate",
            {"name": "Barn1Length", "type": "long"},
            {"name": "Barn1Width", "type": "long"},
            {"name": "Barn2Length", "type": "long"},
            {"name": "Barn2Width", "type": "long"},
            {"name": "Barn3Length", "type": "long"},
            {"name": "Barn3Width", "type": "long"},
            "BarnInformation",
            {"name": "BathsFull", "type": "long"},
            {"name": "BathsHalf", "type": "long"},
            {"name": "BathsTotal", "type": "double"},
            "BedroomBathroomFeatures",
            {"name": "BedsTotal", "type": "long"},
            "Block",
            "BuildingAreaSource",
            "BuildingNumber",
            "BuildingUse",
            "BusinessName",
            "BuyersAgencyCommission",
            "CancelledDate",
            {"name": "CapitalizationRate", "type": "double"},
            {"name": "CDOM", "type": "long"},
            "CeilingHeight",
            "City",
            "CloseDate",
            {"name": "ClosePrice", "type": "double"},
            {"name": "CoListAgent_MUI", "type": "long"},
            "CoListAgentDirectWorkPhone",
            "CoListAgentEmail",
            "CoListAgentFullName",
            "CoListAgentMLSID",
            {"name": "CoListOffice_MUI", "type": "long"},
            "CoListOfficeMLSID",
            "CoListOfficeName",
            "CoListOfficePhone",
            "CommercialFeatures",
            "CommunityFeatures",
            "CompensationPaid",
            "ComplexName",
            "ConstructionMaterials",
            "ConstructionMaterialsWalls",
            "ContingencyInfo",
            {"name": "CoSellingAgent_MUI", "type": "long"},
            "CoSellingAgentDirectWorkPhone",
            "CoSellingAgentEmail",
            "CoSellingAgentFullName",
            "CoSellingAgentMLSID",
            {"name": "CoSellingOffice_MUI", "type": "long"},
            "CoSellingOfficeMLSID",
            "CoSellingOfficeName",
            "CoSellingOfficePhone",
            "Country",
            "CountyOrParish",
            "CropRetireProgramYN",
            "Crops",
            "DateAvailable",
            {"name": "DepositAmount", "type": "long"},
            {"name": "DepositPet", "type": "long"},
            "Development",
            "Directions",
            "DockPermittedYN",
            "Documents",
            {"name": "DOM", "type": "long"},
            "Easements",
            "ElementarySchoolName",
            "EnergySavingFeatures",
            {"name": "Equity", "type": "long"},
            "Exclusions",
            "ExpirationDateOption",
            "ExteriorBuildings",
            "ExteriorFeatures",
            "FarmRanchFeatures",
            "FencedYardYN",
            "Fencing",
            "FHA_VA_ApprovedComplexNumber",
            "FinancingApproved",
            "FinancingProposed",
            "FireplaceFeatures",
            {"name": "FireplacesTotal", "type": "long"},
            "Flooring",
            {"name": "FloorLocationNumber", "type": "long"},
            "FoundationDetails",
            "FreightDoors",
            {"name": "FrontageFeet", "type": "long"},
            "FurnishedYN",
            {"name": "GarageLength", "type": "long"},
            {"name": "GarageWidth", "type": "long"},
            "GreenBuildingCertification",
            "GreenEnergyEfficient",
            {"name": "GrossAnnualExpenses", "type": "long"},
            {"name": "GrossAnnualIncome", "type": "long"},
            {"name": "GrossIncomeMultiplier", "type": "double"},
            "HandicapYN",
            "Heating",
            "HighSchoolName",
            "HOAManagementCompany",
            "HOAManagementCompanyPhone",
            "Inclusions",
            "IncomeExpenseSource",
            {"name": "InsuranceExpense", "type": "long"},
            "InteriorFeatures",
            "IntermediateSchoolName",
            "InternetExposure",
            "JuniorHighSchoolName",
            "KeyboxNumber",
            "KeyBoxType",
            "LakeName",
            "LakePump",
            "LandLeasedYN",
            {"name": "LastListPrice", "type": "double"},
            "LastStatus",
            {"name": "Latitude", "type": "double"},
            "LaundryLocation",
            "LeaseConditions",
            "LeasedDate",
            "LeaseExpirationDate",
            {"name": "LeaseRateMax", "type": "double"},
            {"name": "LeaseRateMin", "type": "double"},
            "LeaseTerm",
            "LeaseTerms",
            "LeaseType",
            "LenderName",
            "LesseePays",
            {"name": "ListAgent_MUI", "type": "long"},
            "ListAgentDirectWorkPhone",
            "ListAgentEmail",
            "ListAgentFullName",
            "ListAgentMLSID",
            "ListingAgreement",
            "ListingContractDate",
            "ListingFinancing",
            "ListingFinancing2",
            {"name": "ListOffice_MUI", "type": "long"},
            "ListOfficeMLSID",
            "ListOfficeName",
            "ListOfficePhone",
            {"name": "ListPrice", "type": "double"},
            {"name": "ListPriceLow", "type": "double"},
            {"name": "Loan1Amount", "type": "long"},
            {"name": "Loan1InterestRate", "type": "double"},
            {"name": "Loan1Years", "type": "long"},
            {"name": "Loan2Amount", "type": "long"},
            {"name": "Loan2InterestRate", "type": "double"},
            {"name": "Loan2Years", "type": "long"},
            {"name": "LoanBalance", "type": "long"},
            {"name": "LoanInterestRate", "type": "double"},
            {"name": "LoanPayment", "type": "long"},
            "LoanPaymentType",
            "LoanType",
            {"name": "Longitude", "type": "double"},
            "LotFeatures",
            "LotNumber",
            "LotSize",
            {"name": "LotSizeArea", "type": "double"},
            {"name": "LotSizeAreaSQFT", "type": "double"},
            "LotSizeDimensions",
            "LotSizeSource",
            "LotSizeUnits",
            {"name": "LotsSoldPackage", "type": "long"},
            {"name": "LotsSoldSeparate", "type": "long"},
            "MapBook",
            "MapCoordinates",
            "MapPage",
            {"name": "Matrix_Unique_ID", "type": "long"},
            "MatrixModifiedDT",
            "MiddleSchoolName",
            "MLS",
            "MLSAreaMajor",
            "MLSAreaMinor",
            "MLSNumber",
            "MLSNumberSaleOrLease",
            "MoniesRequired",
            {"name": "MonthlyPetFee", "type": "long"},
            "MortgageCompany",
            "MoveInDate",
            "MultiParcelIDYN",
            "MultiZoningYN",
            "MunicipalUtilityDistrictYN",
            {"name": "NetAnnualIncome", "type": "long"},
            "NonRefundablePetFeeYN",
            "NoticeSurveillanceDevicesPresent",
            {"name": "NumberOfBarns", "type": "long"},
            {"name": "NumberOfBuildings", "type": "long"},
            {"name": "NumberOfDaysGuestsAllowed", "type": "long"},
            {"name": "NumberOfDiningAreas", "type": "long"},
            {"name": "NumberOfLakes", "type": "long"},
            {"name": "NumberOfLeaseableSpaces", "type": "long"},
            {"name": "NumberOfLivingAreas", "type": "long"},
            {"name": "NumberOfLots", "type": "long"},
            {"name": "NumberOfParkingSpaces", "type": "long"},
            {"name": "NumberOfPetsAllowed", "type": "long"},
            {"name": "NumberOfResidences", "type": "long"},
            {"name": "NumberOfSpacesLeased", "type": "long"},
            {"name": "NumberOfStallsInBarn1", "type": "long"},
            {"name": "NumberOfStallsInBarn2", "type": "long"},
            {"name": "NumberOfStallsInBarn3", "type": "long"},
            {"name": "NumberOfStories", "type": "long"},
            {"name": "NumberOfStoriesInBuilding", "type": "long"},
            {"name": "NumberOfTanksAndPonds", "type": "long"},
            {"name": "NumberOfUnits", "type": "long"},
            {"name": "NumberOfVehicles", "type": "long"},
            {"name": "NumberOfWaterMeters", "type": "long"},
            {"name": "NumberOfWells", "type": "long"},
            "Occupancy",
            {"name": "OccupancyRate", "type": "long"},
            "OfficeSupervisor",
            "OffMarketDate",
            {"name": "OpenHouseCount", "type": "long"},
            "OpenHouseUpcoming",
            {"name": "OriginalListPrice", "type": "double"},
            "OriginalMortgageDate",
            "OtherEquipment",
            "OwnerName",
            "OwnerPays",
            "OwnerPermissionToVideoYN",
            "ParcelNumber",
            "ParcelNumber2",
            "ParkingFeatures",
            {"name": "ParkingSpacesCarport", "type": "long"},
            {"name": "ParkingSpacesCoveredTotal", "type": "long"},
            {"name": "ParkingSpacesGarage", "type": "long"},
            "PendingDate",
            "PermitAddressInternetYN",
            "PermitAVMYN",
            "PermitCommentsReviewsYN",
            "PermitInternetYN",
            "PetPolicy",
            {"name": "PhotoCount", "type": "long"},
            "PhotoModificationTimestamp",
            "PlannedDevelopment",
            {"name": "PlattedWaterfrontBoundary", "type": "long"},
            "PoolFeatures",
            "PoolYN",
            "Possession",
            "PossibleShortSaleYN",
            "PostalCode",
            "PostalCodePlus4",
            "PresentUse",
            "PriceChangeTimestamp",
            "PrimarySchoolName",
            "PrivateRemarks",
            "PropertyAssociationFees",
            "PropertySubType",
            "PropertyType",
            "ProposedUse",
            "PublicRemarks",
            "RanchName",
            "RanchType",
            {"name": "RATIO_ClosePrice_By_ListPrice", "type": "double"},
            {"name": "RATIO_ClosePrice_By_OriginalListPrice", "type": "double"},
            {"name": "RATIO_CurrentPrice_By_SQFT", "type": "double"},
            "Restrictions",
            "RoadAssessmentYN",
            "RoadFrontage",
            {"name": "RoadFrontageDistance", "type": "long"},
            "Roof",
            {"name": "RoomCount", "type": "long"},
            "SchoolDistrict",
            "SecondMortgageYN",
            "SecurityFeatures",
            "SecuritySystemYN",
            {"name": "SellerContributions", "type": "long"},
            "SellerType",
            {"name": "SellingAgent_MUI", "type": "long"},
            "SellingAgentDirectWorkPhone",
            "SellingAgentEmail",
            "SellingAgentFullName",
            "SellingAgentMLSID",
            "SellingAgentSupervisor",
            {"name": "SellingOffice_MUI", "type": "long"},
            "SellingOfficeMLSID",
            "SellingOfficeName",
            "SellingOfficePhone",
            "SeniorCommunityYN",
            "SeniorHighSchoolName",
            "ShowingInstructions",
            "ShowingInstructionsType",
            "SmartHomeFeaturesApporPassYN",
            "SoilType",
            "SoldTerms",
            "SpecialNotes",
            "SpecialTaxingEntities",
            {"name": "SQFTBuilding", "type": "long"},
            {"name": "SQFTGross", "type": "long"},
            {"name": "SQFTLand", "type": "long"},
            {"name": "SQFTLeasable", "type": "long"},
            {"name": "SQFTLot", "type": "long"},
            {"name": "SqFtTotal", "type": "long"},
            "StateOrProvince",
            "Status",
            "StreetDirPrefix",
            "StreetDirSuffix",
            "StreetName",
            "StreetNumber",
            {"name": "StreetNumberSearchable", "type": "long"},
            "StreetSuffix",
            "StructuralStyle",
            "SubAgencyCommission",
            "SubdividedYN",
            "SubdivisionName",
            "SurfaceRights",
            "TaxLegalDescription",
            "TempOffMarketDate",
            "Tenancy",
            "TenantPays",
            "ThirdPartyAssistanceProgramYN",
            "TitleCompanyClosing",
            "TitleCompanyLocation",
            "TitleCompanyPhone",
            "TitleCompanyPreferred",
            "Topography",
            "TotalAnnualExpensesInclude",
            "TransactionType",
            {"name": "UnexemptTaxes", "type": "long"},
            {"name": "UnitCount", "type": "long"},
            "UnitNumber",
            "URL1",
            "URL2",
            "URL3",
            "URL4",
            "URL5",
            "Utilities",
            "UtilitiesOther",
            "VariableFeeYN",
            "VirtualTourURLBranded",
            "VirtualTourURLUnbranded",
            "WasherDryerConnections",
            "WaterfrontFeatures",
            "WaterfrontYN",
            "WillSubdivide",
            "WillSubdivideYN",
            "WithdrawnDate",
            "WithdrawnDateSubListing",
            {"name": "YearBuilt", "type": "long"},
            "YearBuiltDetails",
            "Zoning",
            "ZoningCommercial",
            {"name": "ListPricePerSqft", "type": "double"}
          ]
        },
        "transformSpec": {
          "transforms": [
            {
              "type": "expression",
              "name": "ListPricePerSqft",
              "expression": "round(cast(\"ListPrice\",'DOUBLE')/cast(\"SqFtTotal\",'LONG'), 2)"
            }
          ]
        },
        "metricsSpec": [
          {
            "type": "count",
            "name": "count"
          }
        ]
      }
    }
  }
